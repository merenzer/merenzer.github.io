<script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // SENƒ∞N AYARLARIN (URL EKLENDƒ∞)
        const firebaseConfig = {
            apiKey: "AIzaSyAknclwFdilfFnzbPjtSXyjCPepZm5dM6k",
            authDomain: "discordtoto-5b23b.firebaseapp.com",
            databaseURL: "https://discordtoto-5b23b-default-rtdb.europe-west1.firebasedatabase.app/",
            projectId: "discordtoto-5b23b",
            storageBucket: "discordtoto-5b23b.firebasestorage.app",
            messagingSenderId: "122231157782",
            appId: "1:122231157782:web:eb60fc62aeefd3aa7af137",
            measurementId: "G-MSJKH6J4XH"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        let isAdmin = false;
        const ADMIN_PASSWORD = "1234"; 

        const teamDetails = [
            { name: "Galatasaray", shortName: "GS", logo: "logolar/gs.png" },
            { name: "Fenerbah√ße", shortName: "FB", logo: "logolar/fb.png" },
            { name: "Be≈üikta≈ü JK", shortName: "BJK", logo: "logolar/bjk.png" },
            { name: "Trabzonspor", shortName: "TS", logo: "logolar/ts.png" },
            { name: "Alanyaspor", shortName: "Alanyaspor", logo: "logolar/aly.png" },
            { name: "Antalyaspor", shortName: "Antalyaspor", logo: "logolar/ant.png" },
            { name: "Kasƒ±mpa≈üa", shortName: "Kasƒ±mpa≈üa", logo: "logolar/kas.png" },
            { name: "Sivasspor", shortName: "Sivasspor", logo: "logolar/siv.png" },
            { name: "Kayserispor", shortName: "Kayserispor", logo: "logolar/kay.png" },
            { name: "Konyaspor", shortName: "Konyaspor", logo: "logolar/kon.png" },
            { name: "MKE Ankarag√ºc√º", shortName: "Ankarag√ºc√º", logo: "logolar/ag.png" },
            { name: "√áaykur Rizespor", shortName: "Rizespor", logo: "logolar/crs.png" },
            { name: "Samsunspor", shortName: "Samsunspor", logo: "logolar/sam.png" },
            { name: "G√∂ztepe", shortName: "G√∂ztepe", logo: "logolar/g√∂z.png" },
            { name: "Kocaelispor", shortName: "Kocaelispor", logo: "logolar/ks.png" },
            { name: "Erzurumspor", shortName: "Erzurumspor", logo: "logolar/erz.png" },
            { name: "ARCA √áorum FK", shortName: "√áorum FK", logo: "logolar/cor.png" },
            { name: "Red Bull Ey√ºpspor", shortName: "Ey√ºpspor", logo: "logolar/eyu.png" }
        ];

        // Varsayƒ±lan veriler (ƒ∞lk a√ßƒ±lƒ±≈ü i√ßin)
        const defaultFixtureData = [
            {w:1, h:"Galatasaray", a:"Kocaelispor", s:"SOCAR Enerji Park", hs:null, as:null}, {w:1, h:"Fenerbah√ße", a:"Kasƒ±mpa≈üa", s:"ACIBADEM Stadƒ±", hs:null, as:null}, {w:1, h:"Be≈üikta≈ü JK", a:"Samsunspor", s:"VODAFONE Park", hs:null, as:null}, {w:1, h:"Trabzonspor", a:"Erzurumspor", s:"VESTEL Stadƒ±", hs:null, as:null}, {w:1, h:"Alanyaspor", a:"ARCA √áorum FK", s:"ANEX Arena", hs:null, as:null}, {w:1, h:"Antalyaspor", a:"Konyaspor", s:"SUNEXPRESS", hs:null, as:null}, {w:1, h:"G√∂ztepe", a:"Kayserispor", s:"ZURICH Stadƒ±", hs:null, as:null}, {w:1, h:"MKE Ankarag√ºc√º", a:"√áaykur Rizespor", s:"TUSA≈û Ba≈ükent", hs:null, as:null}, {w:1, h:"Red Bull Ey√ºpspor", a:"Sivasspor", s:"Vƒ∞APORT Arena", hs:null, as:null},
            {w:2, h:"Sivasspor", a:"Galatasaray", s:"Lƒ∞MAK", hs:null, as:null}, {w:2, h:"Samsunspor", a:"Fenerbah√ße", s:"YILPORT 19 Mayƒ±s", hs:null, as:null}, {w:2, h:"Kocaelispor", a:"Be≈üikta≈ü JK", s:"BRƒ∞SA Stadƒ±", hs:null, as:null}, {w:2, h:"Kasƒ±mpa≈üa", a:"Trabzonspor", s:"Cƒ∞NER Stadyum", hs:null, as:null}, {w:2, h:"√áaykur Rizespor", a:"Alanyaspor", s:"√áAYKUR Didi", hs:null, as:null}, {w:2, h:"Konyaspor", a:"MKE Ankarag√ºc√º", s:"MEDA≈û Arena", hs:null, as:null}, {w:2, h:"Kayserispor", a:"Antalyaspor", s:"RHG Arena", hs:null, as:null}, {w:2, h:"ARCA √áorum FK", a:"G√∂ztepe", s:"ARCA Gold Park", hs:null, as:null}, {w:2, h:"Erzurumspor", a:"Red Bull Ey√ºpspor", s:"T√ºrk Telekom", hs:null, as:null},
            {w:3, h:"Galatasaray", a:"Erzurumspor", s:"SOCAR Enerji Park", hs:null, as:null}, {w:3, h:"Fenerbah√ße", a:"Kocaelispor", s:"ACIBADEM Stadƒ±", hs:null, as:null}, {w:3, h:"Be≈üikta≈ü JK", a:"Kasƒ±mpa≈üa", s:"VODAFONE Park", hs:null, as:null}, {w:3, h:"Trabzonspor", a:"Samsunspor", s:"VESTEL Stadƒ±", hs:null, as:null}, {w:3, h:"Alanyaspor", a:"Konyaspor", s:"ANEX Arena", hs:null, as:null}, {w:3, h:"Antalyaspor", a:"ARCA √áorum FK", s:"SUNEXPRESS", hs:null, as:null}, {w:3, h:"G√∂ztepe", a:"√áaykur Rizespor", s:"ZURICH Stadƒ±", hs:null, as:null}, {w:3, h:"MKE Ankarag√ºc√º", a:"Sivasspor", s:"TUSA≈û Ba≈ükent", hs:null, as:null}, {w:3, h:"Red Bull Ey√ºpspor", a:"Kayserispor", s:"Vƒ∞APORT Arena", hs:null, as:null},
            {w:4, h:"Trabzonspor", a:"Be≈üikta≈ü JK", s:"VESTEL Stadƒ±", hs:null, as:null}, {w:4, h:"Galatasaray", a:"Alanyaspor", s:"SOCAR Enerji Park", hs:null, as:null}, {w:4, h:"Fenerbah√ße", a:"Sivasspor", s:"ACIBADEM Stadƒ±", hs:null, as:null}, {w:4, h:"Samsunspor", a:"MKE Ankarag√ºc√º", s:"YILPORT 19 Mayƒ±s", hs:null, as:null}, {w:4, h:"Erzurumspor", a:"G√∂ztepe", s:"T√ºrk Telekom", hs:null, as:null}, {w:4, h:"Kasƒ±mpa≈üa", a:"Antalyaspor", s:"Cƒ∞NER Stadyum", hs:null, as:null}, {w:4, h:"Kocaelispor", a:"Kayserispor", s:"BRƒ∞SA Stadƒ±", hs:null, as:null}, {w:4, h:"√áaykur Rizespor", a:"Konyaspor", s:"√áAYKUR Didi", hs:null, as:null}, {w:4, h:"ARCA √áorum FK", a:"Red Bull Ey√ºpspor", s:"ARCA Gold Park", hs:null, as:null},
            {w:5, h:"Kayserispor", a:"Galatasaray", s:"RHG Arena", hs:null, as:null}, {w:5, h:"Alanyaspor", a:"Fenerbah√ße", s:"ANEX Arena", hs:null, as:null}, {w:5, h:"Be≈üikta≈ü JK", a:"Erzurumspor", s:"VODAFONE Park", hs:null, as:null}, {w:5, h:"Sivasspor", a:"Trabzonspor", s:"Lƒ∞MAK", hs:null, as:null}, {w:5, h:"Antalyaspor", a:"Samsunspor", s:"SUNEXPRESS", hs:null, as:null}, {w:5, h:"G√∂ztepe", a:"Kocaelispor", s:"ZURICH Stadƒ±", hs:null, as:null}, {w:5, h:"MKE Ankarag√ºc√º", a:"ARCA √áorum FK", s:"TUSA≈û Ba≈ükent", hs:null, as:null}, {w:5, h:"Konyaspor", a:"Kasƒ±mpa≈üa", s:"MEDA≈û Arena", hs:null, as:null}, {w:5, h:"Red Bull Ey√ºpspor", a:"√áaykur Rizespor", s:"Vƒ∞APORT Arena", hs:null, as:null},
            {w:6, h:"Galatasaray", a:"Red Bull Ey√ºpspor", s:"SOCAR Enerji Park", hs:null, as:null}, {w:6, h:"Fenerbah√ße", a:"Antalyaspor", s:"ACIBADEM Stadƒ±", hs:null, as:null}, {w:6, h:"Be≈üikta≈ü JK", a:"Alanyaspor", s:"VODAFONE Park", hs:null, as:null}, {w:6, h:"Trabzonspor", a:"MKE Ankarag√ºc√º", s:"VESTEL Stadƒ±", hs:null, as:null}, {w:6, h:"Samsunspor", a:"Sivasspor", s:"YILPORT 19 Mayƒ±s", hs:null, as:null}, {w:6, h:"Erzurumspor", a:"Konyaspor", s:"T√ºrk Telekom", hs:null, as:null}, {w:6, h:"Kocaelispor", a:"√áaykur Rizespor", s:"BRƒ∞SA Stadƒ±", hs:null, as:null}, {w:6, h:"Kasƒ±mpa≈üa", a:"G√∂ztepe", s:"Cƒ∞NER Stadyum", hs:null, as:null}, {w:6, h:"ARCA √áorum FK", a:"Kayserispor", s:"ARCA Gold Park", hs:null, as:null},
            {w:7, h:"Galatasaray", a:"Trabzonspor", s:"SOCAR Enerji Park", hs:null, as:null}, {w:7, h:"Be≈üikta≈ü JK", a:"G√∂ztepe", s:"VODAFONE Park", hs:null, as:null}, {w:7, h:"Fenerbah√ße", a:"ARCA √áorum FK", s:"ACIBADEM Stadƒ±", hs:null, as:null}, {w:7, h:"Sivasspor", a:"Antalyaspor", s:"Lƒ∞MAK", hs:null, as:null}, {w:7, h:"MKE Ankarag√ºc√º", a:"Kayserispor", s:"TUSA≈û Ba≈ükent", hs:null, as:null}, {w:7, h:"Alanyaspor", a:"Erzurumspor", s:"ANEX Arena", hs:null, as:null}, {w:7, h:"√áaykur Rizespor", a:"Samsunspor", s:"√áAYKUR Didi", hs:null, as:null}, {w:7, h:"Konyaspor", a:"Kocaelispor", s:"MEDA≈û Arena", hs:null, as:null}, {w:7, h:"Red Bull Ey√ºpspor", a:"Kasƒ±mpa≈üa", s:"Vƒ∞APORT Arena", hs:null, as:null},
            {w:8, h:"Antalyaspor", a:"Galatasaray", s:"SUNEXPRESS", hs:null, as:null}, {w:8, h:"G√∂ztepe", a:"Fenerbah√ße", s:"ZURICH Stadƒ±", hs:null, as:null}, {w:8, h:"ARCA √áorum FK", a:"Be≈üikta≈ü JK", s:"ARCA Gold Park", hs:null, as:null}, {w:8, h:"Trabzonspor", a:"Alanyaspor", s:"VESTEL Stadƒ±", hs:null, as:null}, {w:8, h:"Samsunspor", a:"Konyaspor", s:"YILPORT 19 Mayƒ±s", hs:null, as:null}, {w:8, h:"Erzurumspor", a:"Sivasspor", s:"T√ºrk Telekom", hs:null, as:null}, {w:8, h:"Kasƒ±mpa≈üa", a:"MKE Ankarag√ºc√º", s:"Cƒ∞NER Stadyum", hs:null, as:null}, {w:8, h:"Kayserispor", a:"√áaykur Rizespor", s:"RHG Arena", hs:null, as:null}, {w:8, h:"Kocaelispor", a:"Red Bull Ey√ºpspor", s:"BRƒ∞SA Stadƒ±", hs:null, as:null},
            {w:9, h:"Galatasaray", a:"G√∂ztepe", s:"SOCAR Enerji Park", hs:null, as:null}, {w:9, h:"Fenerbah√ße", a:"Erzurumspor", s:"ACIBADEM Stadƒ±", hs:null, as:null}, {w:9, h:"Be≈üikta≈ü JK", a:"Antalyaspor", s:"VODAFONE Park", hs:null, as:null}, {w:9, h:"Trabzonspor", a:"ARCA √áorum FK", s:"VESTEL Stadƒ±", hs:null, as:null}, {w:9, h:"Sivasspor", a:"Kayserispor", s:"Lƒ∞MAK", hs:null, as:null}, {w:9, h:"MKE Ankarag√ºc√º", a:"Kocaelispor", s:"TUSA≈û Ba≈ükent", hs:null, as:null}, {w:9, h:"Konyaspor", a:"Alanyaspor", s:"MEDA≈û Arena", hs:null, as:null}, {w:9, h:"√áaykur Rizespor", a:"Kasƒ±mpa≈üa", s:"√áAYKUR Didi", hs:null, as:null}, {w:9, h:"Red Bull Ey√ºpspor", a:"Samsunspor", s:"Vƒ∞APORT Arena", hs:null, as:null},
            {w:10, h:"Fenerbah√ße", a:"Be≈üikta≈ü JK", s:"ACIBADEM Stadƒ±", hs:null, as:null}, {w:10, h:"Galatasaray", a:"√áaykur Rizespor", s:"SOCAR Enerji Park", hs:null, as:null}, {w:10, h:"Trabzonspor", a:"Kayserispor", s:"VESTEL Stadƒ±", hs:null, as:null}, {w:10, h:"Samsunspor", a:"Kocaelispor", s:"YILPORT 19 Mayƒ±s", hs:null, as:null}, {w:10, h:"Erzurumspor", a:"ARCA √áorum FK", s:"T√ºrk Telekom", hs:null, as:null}, {w:10, h:"Alanyaspor", a:"Antalyaspor", s:"ANEX Arena", hs:null, as:null}, {w:10, h:"Konyaspor", a:"Sivasspor", s:"MEDA≈û Arena", hs:null, as:null}, {w:10, h:"G√∂ztepe", a:"MKE Ankarag√ºc√º", s:"ZURICH Stadƒ±", hs:null, as:null}, {w:10, h:"Kasƒ±mpa≈üa", a:"Red Bull Ey√ºpspor", s:"Cƒ∞NER Stadyum", hs:null, as:null},
            {w:11, h:"Galatasaray", a:"Be≈üikta≈ü JK", s:"SOCAR Enerji Park", hs:null, as:null}, {w:11, h:"Kocaelispor", a:"Fenerbah√ße", s:"BRƒ∞SA Stadƒ±", hs:null, as:null}, {w:11, h:"Red Bull Ey√ºpspor", a:"Trabzonspor", s:"Vƒ∞APORT Arena", hs:null, as:null}, {w:11, h:"Sivasspor", a:"G√∂ztepe", s:"Lƒ∞MAK", hs:null, as:null}, {w:11, h:"Antalyaspor", a:"Erzurumspor", s:"SUNEXPRESS", hs:null, as:null}, {w:11, h:"MKE Ankarag√ºc√º", a:"Alanyaspor", s:"TUSA≈û Ba≈ükent", hs:null, as:null}, {w:11, h:"√áaykur Rizespor", a:"Kasƒ±mpa≈üa", s:"√áAYKUR Didi", hs:null, as:null}, {w:11, h:"Kayserispor", a:"Samsunspor", s:"RHG Arena", hs:null, as:null}, {w:11, h:"ARCA √áorum FK", a:"Konyaspor", s:"ARCA Gold Park", hs:null, as:null},
            {w:12, h:"Galatasaray", a:"Samsunspor", s:"SOCAR Enerji Park", hs:null, as:null}, {w:12, h:"Fenerbah√ße", a:"√áaykur Rizespor", s:"ACIBADEM Stadƒ±", hs:null, as:null}, {w:12, h:"Be≈üikta≈ü JK", a:"Sivasspor", s:"VODAFONE Park", hs:null, as:null}, {w:12, h:"Trabzonspor", a:"Antalyaspor", s:"VESTEL Stadƒ±", hs:null, as:null}, {w:12, h:"Erzurumspor", a:"Kocaelispor", s:"T√ºrk Telekom", hs:null, as:null}, {w:12, h:"Alanyaspor", a:"Kayserispor", s:"ANEX Arena", hs:null, as:null}, {w:12, h:"Konyaspor", a:"ARCA √áorum FK", s:"MEDA≈û Arena", hs:null, as:null}, {w:12, h:"G√∂ztepe", a:"Red Bull Ey√ºpspor", s:"ZURICH Stadƒ±", hs:null, as:null}, {w:12, h:"Kasƒ±mpa≈üa", a:"MKE Ankarag√ºc√º", s:"Cƒ∞NER Stadyum", hs:null, as:null},
            {w:13, h:"Galatasaray", a:"Fenerbah√ße", s:"SOCAR Enerji Park", hs:null, as:null}, {w:13, h:"Be≈üikta≈ü JK", a:"MKE Ankarag√ºc√º", s:"VODAFONE Park", hs:null, as:null}, {w:13, h:"Trabzonspor", a:"Konyaspor", s:"VESTEL Stadƒ±", hs:null, as:null}, {w:13, h:"Samsunspor", a:"Erzurumspor", s:"YILPORT 19 Mayƒ±s", hs:null, as:null}, {w:13, h:"Sivasspor", a:"Alanyaspor", s:"Lƒ∞MAK", hs:null, as:null}, {w:13, h:"Antalyaspor", a:"G√∂ztepe", s:"SUNEXPRESS", hs:null, as:null}, {w:13, h:"Kayserispor", a:"Kasƒ±mpa≈üa", s:"RHG Arena", hs:null, as:null}, {w:13, h:"Kocaelispor", a:"ARCA √áorum FK", s:"BRƒ∞SA Stadƒ±", hs:null, as:null}, {w:13, h:"Red Bull Ey√ºpspor", a:"√áaykur Rizespor", s:"Vƒ∞APORT Arena", hs:null, as:null},
            {w:14, h:"MKE Ankarag√ºc√º", a:"Galatasaray", s:"TUSA≈û Ba≈ükent", hs:null, as:null}, {w:14, h:"Fenerbah√ße", a:"Konyaspor", s:"ACIBADEM Stadƒ±", hs:null, as:null}, {w:14, h:"√áaykur Rizespor", a:"Be≈üikta≈ü JK", s:"√áAYKUR Didi", hs:null, as:null}, {w:14, h:"G√∂ztepe", a:"Trabzonspor", s:"ZURICH Stadƒ±", hs:null, as:null}, {w:14, h:"ARCA √áorum FK", a:"Samsunspor", s:"ARCA Gold Park", hs:null, as:null}, {w:14, h:"Kasƒ±mpa≈üa", a:"Erzurumspor", s:"Cƒ∞NER Stadyum", hs:null, as:null}, {w:14, h:"Alanyaspor", a:"Kocaelispor", s:"ANEX Arena", hs:null, as:null}, {w:14, h:"Antalyaspor", a:"Sivasspor", s:"SUNEXPRESS", hs:null, as:null}, {w:14, h:"Kayserispor", a:"Red Bull Ey√ºpspor", s:"RHG Arena", hs:null, as:null},
            {w:15, h:"Trabzonspor", a:"Fenerbah√ße", s:"VESTEL Stadƒ±", hs:null, as:null}, {w:15, h:"Galatasaray", a:"Red Bull Ey√ºpspor", s:"SOCAR Enerji Park", hs:null, as:null}, {w:15, h:"Be≈üikta≈ü JK", a:"ARCA √áorum FK", s:"VODAFONE Park", hs:null, as:null}, {w:15, h:"Samsunspor", a:"Kasƒ±mpa≈üa", s:"YILPORT 19 Mayƒ±s", hs:null, as:null}, {w:15, h:"Erzurumspor", a:"Kayserispor", s:"T√ºrk Telekom", hs:null, as:null}, {w:15, h:"Sivasspor", a:"G√∂ztepe", s:"Lƒ∞MAK", hs:null, as:null}, {w:15, h:"Kocaelispor", a:"Antalyaspor", s:"BRƒ∞SA Stadƒ±", hs:null, as:null}, {w:15, h:"Alanyaspor", a:"MKE Ankarag√ºc√º", s:"ANEX Arena", hs:null, as:null}, {w:15, h:"Konyaspor", a:"√áaykur Rizespor", s:"MEDA≈û Arena", hs:null, as:null},
            {w:16, h:"Kasƒ±mpa≈üa", a:"Galatasaray", s:"Cƒ∞NER Stadyum", hs:null, as:null}, {w:16, h:"√áaykur Rizespor", a:"Fenerbah√ße", s:"√áAYKUR Didi", hs:null, as:null}, {w:16, h:"Kayserispor", a:"Be≈üikta≈ü JK", s:"RHG Arena", hs:null, as:null}, {w:16, h:"Kocaelispor", a:"Trabzonspor", s:"BRƒ∞SA Stadƒ±", hs:null, as:null}, {w:16, h:"MKE Ankarag√ºc√º", a:"Sivasspor", s:"TUSA≈û Ba≈ükent", hs:null, as:null}, {w:16, h:"G√∂ztepe", a:"Samsunspor", s:"ZURICH Stadƒ±", hs:null, as:null}, {w:16, h:"ARCA √áorum FK", a:"Alanyaspor", s:"ARCA Gold Park", hs:null, as:null}, {w:16, h:"Red Bull Ey√ºpspor", a:"Konyaspor", s:"Vƒ∞APORT Arena", hs:null, as:null}, {w:16, h:"Antalyaspor", a:"Erzurumspor", s:"SUNEXPRESS", hs:null, as:null},
            {w:17, h:"Be≈üikta≈ü JK", a:"Galatasaray", s:"VODAFONE Park", hs:null, as:null}, {w:17, h:"Fenerbah√ße", a:"Alanyaspor", s:"ACIBADEM Stadƒ±", hs:null, as:null}, {w:17, h:"Trabzonspor", a:"Sivasspor", s:"VESTEL Stadƒ±", hs:null, as:null}, {w:17, h:"Samsunspor", a:"Erzurumspor", s:"YILPORT 19 Mayƒ±s", hs:null, as:null}, {w:17, h:"Konyaspor", a:"G√∂ztepe", s:"MEDA≈û Arena", hs:null, as:null}, {w:17, h:"MKE Ankarag√ºc√º", a:"Antalyaspor", s:"TUSA≈û Ba≈ükent", hs:null, as:null}, {w:17, h:"ARCA √áorum FK", a:"√áaykur Rizespor", s:"ARCA Gold Park", hs:null, as:null}, {w:17, h:"Kocaelispor", a:"Kasƒ±mpa≈üa", s:"BRƒ∞SA Stadƒ±", hs:null, as:null}, {w:17, h:"Kayserispor", a:"Red Bull Ey√ºpspor", s:"RHG Arena", hs:null, as:null}
        ];

        let fixtureData = [];

        const fixtureRef = ref(db, 'fixtures');

        onValue(fixtureRef, (snapshot) => {
            const data = snapshot.val();
            
            if (data) {
                fixtureData = data;
            } else {
                fixtureData = JSON.parse(JSON.stringify(defaultFixtureData));
                set(fixtureRef, fixtureData);
            }

            document.getElementById('loading').style.display = 'none';
            document.getElementById('main-view').style.display = 'block';
            renderAll();
        });

        window.setScore = function(index, side, val) {
            if(!isAdmin) return;
            const newValue = val === "" ? null : parseInt(val);
            set(ref(db, 'fixtures/' + index + '/' + side), newValue);
        }

        function renderAll() {
            const grid = document.getElementById('main-fixture-grid');
            grid.innerHTML = "";
            let currentWeek = 0;
            let weekHtml = "";

            fixtureData.forEach((m, i) => {
                if (m.w !== currentWeek) {
                    if (currentWeek !== 0) {
                        weekHtml += `</div></div>`;
                        grid.innerHTML += weekHtml;
                    }
                    currentWeek = m.w;
                    weekHtml = `
                        <div class="week-card">
                            <div class="week-header">
                                <span class="week-number">${currentWeek}</span>
                                <span class="week-label">Hafta</span>
                            </div>
                            <div class="match-list">
                    `;
                }

                let center;
                if (isAdmin) {
                    center = `<div style="display:flex;justify-content:center;align-items:center">
                                <input type="number" class="score-input" value="${m.hs ?? ''}" oninput="setScore(${i},'hs',this.value)"> 
                                <span class="vs">-</span> 
                                <input type="number" class="score-input" value="${m.as ?? ''}" oninput="setScore(${i},'as',this.value)">
                              </div>`;
                } else {
                    // D√úZELTME BURADA YAPILDI: "UNDEFINED" SORUNU √á√ñZ√úLD√ú
                    center = `<span class="vs">${(m.hs != null && m.as != null) ? m.hs + ' - ' + m.as : 'VS'}</span>`;
                }

                weekHtml += `
                    <div class="match-row">
                        <div class="match-info" style="justify-content:flex-start; flex:1;">${m.h}</div>
                        <div style="flex:0 0 100px; text-align:center;">${center}</div>
                        <div class="match-info" style="justify-content:flex-end; flex:1;">${m.a}</div>
                        <div class="stadium-info">${m.s}</div>
                    </div>
                `;

                if (i === fixtureData.length - 1) {
                    weekHtml += `</div></div>`;
                    grid.innerHTML += weekHtml;
                }
            });

            let statsMap = {};
            teamDetails.forEach(t => {
                statsMap[t.name] = { n: t.name, l: t.logo, om:0, g:0, b:0, m:0, ag:0, yg:0, av:0, p:0 };
            });

            fixtureData.forEach(m => {
                if (m.hs != null && m.as != null) {
                    let h = statsMap[m.h];
                    let a = statsMap[m.a];
                    
                    if(h && a) {
                        h.om++; a.om++;
                        h.ag += parseInt(m.hs); h.yg += parseInt(m.as);
                        a.ag += parseInt(m.as); a.yg += parseInt(m.hs);

                        if (m.hs > m.as) { h.g++; h.p += 3; a.m++; }
                        else if (m.as > m.hs) { a.g++; a.p += 3; h.m++; }
                        else { h.b++; h.p++; a.b++; a.p++; }
                        
                        h.av = h.ag - h.yg;
                        a.av = a.ag - a.yg;
                    }
                }
            });

            let sortedStats = Object.values(statsMap).sort((a, b) => b.p - a.p || b.av - a.av || b.ag - a.ag);
            
            document.getElementById('standings-body').innerHTML = sortedStats.map((t, i) => `
                <tr>
                    <td>${i + 1}</td>
                    <td style="text-align:left; display:flex; align-items:center;">
                        <div class="team-logo-btn" style="width:30px; height:30px; margin-right:10px; border:none; background-image:url('${t.l}'); background-color:#eee;" onclick="showTeam('${t.n}')"></div>
                        ${t.n}
                    </td>
                    <td>${t.om}</td><td>${t.g}</td><td>${t.b}</td><td>${t.m}</td><td>${t.av}</td>
                    <td style="color:var(--pink-accent); font-weight:800;">${t.p}</td>
                </tr>
            `).join('');
        }

        window.showTeam = function(name) {
            const team = teamDetails.find(t => t.name === name);
            if(!team) return;

            document.getElementById('selected-team-name').innerText = name;
            const teamMatches = fixtureData.filter(m => m.h === name || m.a === name);
            
            document.getElementById('team-fixture-list').innerHTML = teamMatches.map(m => {
                const isHome = m.h === name;
                const scoreText = (m.hs != null && m.as != null) ? (isHome ? `${m.hs} - ${m.as}` : `${m.as} - ${m.hs}`) : "VS";
                const icon = isHome ? "üè†" : "‚úàÔ∏è";
                const opponent = isHome ? m.a : m.h;

                return `
                <div class="gs-match-card">
                    <div class="card-left">
                        <div class="week-badge">${m.w}.</div>
                        <div class="location-icon">${icon}</div>
                        <div class="match-details" style="flex:1;">${opponent}</div>
                    </div>
                    <div class="stadium-info-list">
                        <span class="stadium-icon">üèüÔ∏è</span> ${m.s || ''} 
                        <strong style="margin-left:10px; color:var(--pink-accent); font-size:1.1em;">${scoreText}</strong>
                    </div>
                </div>`;
            }).join('');
            
            showView('team');
        }

        window.showView = function(view, el) {
            document.getElementById('main-view').style.display = 'none';
            document.getElementById('standings-view').style.display = 'none';
            document.getElementById('team-view').style.display = 'none';
            
            if(el) {
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                el.classList.add('active');
            }

            if(view === 'main') {
                document.getElementById('main-view').style.display = 'block';
                document.querySelector('.team-selector-container').style.display = 'block';
            } else if(view === 'standings') {
                document.getElementById('standings-view').style.display = 'block';
                document.querySelector('.team-selector-container').style.display = 'none';
            } else if(view === 'team') {
                document.getElementById('team-view').style.display = 'block';
                document.querySelector('.team-selector-container').style.display = 'block';
            }
        }

        window.showMainView = function() {
            showView('main', document.querySelector('.nav-btn:first-child'));
        }

        window.toggleAdmin = function() {
            if (isAdmin) {
                isAdmin = false;
                alert("Y√∂netici modundan √ßƒ±kƒ±ldƒ±.");
            } else {
                let input = prompt("L√ºtfen Y√∂netici ≈ûifresini Girin:");
                if (input === ADMIN_PASSWORD) {
                    isAdmin = true;
                    alert("Y√∂netici modu a√ßƒ±ldƒ±!");
                } else {
                    alert("Hatalƒ± ≈ûifre!");
                    return;
                }
            }
            
            const btn = document.getElementById('admin-toggle');
            btn.innerText = isAdmin ? "‚öôÔ∏è D√úZENLEME MODU: A√áIK" : "‚öôÔ∏è Y√ñNETƒ∞Cƒ∞ Gƒ∞Rƒ∞≈ûƒ∞";
            btn.classList.toggle('on', isAdmin);
            
            renderAll();
        }

        // D√úZELTME BURADA YAPILDI: LOGOLAR ARTIK G√ñR√úNECEK (t.l -> t.logo)
        document.getElementById('logo-grid').innerHTML = teamDetails.sort((a,b) => a.name.localeCompare(b.name)).map(t => 
            `<div class="team-logo-btn" style="background-image:url('${t.logo}')" onclick="showTeam('${t.name}')"></div>`
        ).join('');

    </script>
